(()=>{"use strict";const e=(e,t="Сhoose a movie")=>{const s=document.getElementById("cards__list");let o,r=0;(()=>{s.innerHTML="";let o=0;e.forEach((e=>{((e,t)=>{let s=!1;return"Сhoose a movie"===t||e.movies||(s=!s),"Сhoose a movie"!==t&&e.movies&&(s=!s,e.movies.forEach((e=>{t===e.trim()&&(s=!s)}))),s})(e,t)||(s.insertAdjacentHTML("beforeend",`<li class="cards__item card${o}">\n      <div class="cards__img"><img src="${e.photo}"></div>\n      <div class="cards__nickname">${e.name}</div>\n      <div class="cards__name"><span>Actor : </span>${e.actors}</div>\n      <div class="cards__mov">Movies:\n      <ul class="cards__movies mov${o}"></ul>\n      </div>\n      <div class="cards__status status${o}">${e.status}</div>\n      </li>`),e.movies&&e.movies.forEach((e=>{document.querySelector(`.mov${o}`).insertAdjacentHTML("beforeend",`<li class="${e.trim()===t?"active":""}">${e}</li>`)})),e.status&&"alive"===e.status&&(document.querySelector(`.status${o}`).style.color="green"),e.status&&"unknown"===e.status&&(document.querySelector(`.status${o}`).style.color="gray"),o++)}))})(),o=setInterval((()=>{const e=s.querySelector(`.card${r}`),t=s.querySelectorAll(".cards__item");0!==r&&(s.querySelector(".card"+(r-1)).style.opacity=1),(({timing:e,draw:t,duration:s})=>{let o=performance.now();requestAnimationFrame((function r(n){let a=(n-o)/s;a>1&&(a=1);let c=e(a);t(c),a<1&&requestAnimationFrame(r)}))})({duration:80,timing:e=>e,draw(t){e.style.opacity=t}}),r++,r===t.length&&clearInterval(o)}),100)};fetch("./db/dbHeroes.json").then((e=>e.json())).then((t=>{(t=>{const s=document.querySelector(".select"),o=document.querySelector(".header__select-head");let r=[];t.forEach((e=>{e.movies&&e.movies.forEach((e=>{r.push(e)}))})),r=r.filter(((e,t)=>r.indexOf(e.trim())===t)),r.sort().forEach((e=>{s.insertAdjacentHTML("beforeend",`<li id="${e}">${e}</li>`)})),document.addEventListener("click",(r=>{r.preventDefault();const n=s.querySelectorAll("li");r.target===o&&s.classList.contains("d-none")?s.classList.remove("d-none"):s.classList.add("d-none"),n.forEach((s=>{r.target===s&&(o.innerText=s.innerText,e(t,s.innerText))}))}))})(t),e(t)})).catch((e=>console.log(e)))})();