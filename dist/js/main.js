(()=>{"use strict";const e=e=>{const t=document.getElementById("cards__list"),s=document.getElementById("select-head"),n=document.getElementById("select-head2"),a=document.getElementById("select-head3"),c=document.getElementById("select-head4");let r,o=0;const d=(e,t,s)=>{let n=!1;return"Сhoose a species"===t||"Сhoose a gender"===t||"Сhoose a movie"===t||"Сhoose a status"===t||e[s]||(n=!n),"Сhoose a species"!==t&&"Сhoose a gender"!==t&&"Сhoose a movie"!==t&&"Сhoose a status"!==t&&e[s]&&(n=!n,Array.isArray(e[s])?e[s].forEach((e=>{t.toLowerCase()===e.toLowerCase().trim()&&(n=!n)})):t.toLowerCase()===e[s].toLowerCase().trim()&&(n=!n)),n};(()=>{t.innerHTML="";let r=0;e.forEach((e=>{d(e,s.innerText,"movies")||d(e,n.innerText,"status")||d(e,a.innerText,"species")||d(e,c.innerText,"gender")||(t.insertAdjacentHTML("beforeend",`<li class="cards__item card${r}">\n      <div class="cards__img"><img src="${e.photo}"></div>\n      <div class="cards__nickname">${e.name}</div>\n      <div class="cards__name"><span>Actor : </span>${e.actors}</div>\n      <div class="cards__mov">Movies:\n      <ul class="cards__movies mov${r}"></ul>\n      </div>\n      <div class="cards__species species${r}">${e.species}</div>\n      <div class="cards__gender gender${r}">${e.gender}</div>\n      <div class="cards__status status${r}">${e.status}</div>\n      </li>`),e.movies&&e.movies.forEach((e=>{document.querySelector(`.mov${r}`).insertAdjacentHTML("beforeend",`<li>${e}</li>`)})),e.status&&"alive"===e.status&&(document.querySelector(`.status${r}`).style.color="green"),e.status&&"unknown"===e.status&&(document.querySelector(`.status${r}`).style.color="gray"),r++)}))})(),r=setInterval((()=>{const e=t.querySelector(`.card${o}`),s=t.querySelectorAll(".cards__item");e?(0!==o&&(t.querySelector(".card"+(o-1)).style.opacity=1),(({timing:e,draw:t,duration:s})=>{let n=performance.now();requestAnimationFrame((function a(c){let r=(c-n)/s;r>1&&(r=1);let o=e(r);t(o),r<1&&requestAnimationFrame(a)}))})({duration:80,timing:e=>e,draw(t){e.style.opacity=t}}),o++,document.addEventListener("click",(e=>{document.querySelectorAll(".select>li").forEach((t=>{e.target===t&&clearInterval(r)}))})),o===s.length&&clearInterval(r)):clearInterval(r)}),100)},t=(t,s,n,a)=>{const c=document.getElementById(s),r=document.getElementById(n);let o=[];t.forEach((e=>{e[a]&&Array.isArray(e[a])&&e[a].forEach((e=>{o.push(e)})),e[a]&&!Array.isArray(e[a])&&o.push(e[a].toLowerCase())})),o=o.filter(((e,t)=>o.indexOf(e.trim())===t)),o.sort().forEach((e=>{c.insertAdjacentHTML("beforeend",`<li id="${e}">${e}</li>`)})),document.addEventListener("click",(s=>{s.preventDefault();const n=c.querySelectorAll("li");s.target===r&&c.classList.contains("d-none")?c.classList.remove("d-none"):c.classList.add("d-none"),n.forEach((n=>{s.target===n&&(r.innerText=n.innerText,n.classList.contains("def")?r.classList.remove("active"):r.classList.add("active"),e(t))}))}))};fetch("./db/dbHeroes.json").then((e=>e.json())).then((s=>{t(s,"select","select-head","movies"),t(s,"select2","select-head2","status"),t(s,"select3","select-head3","species"),t(s,"select4","select-head4","gender"),e(s),(t=>{const s=document.getElementById("btn"),n=document.getElementById("select-head"),a=document.getElementById("select-head2"),c=document.getElementById("select-head3"),r=document.getElementById("select-head4");s.addEventListener("click",(o=>{o.target===s&&(n.innerText="Сhoose a movie",a.innerText="Сhoose a status",c.innerText="Сhoose a species",r.innerText="Сhoose a gender",e(t))}))})(s)})).catch((e=>console.log(e)))})();